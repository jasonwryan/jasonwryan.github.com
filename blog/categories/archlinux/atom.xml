<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: archlinux | jasonwryan.com]]></title>
  <link href="http://jasonwryan.github.com/blog/categories/archlinux/atom.xml" rel="self"/>
  <link href="http://jasonwryan.github.com/"/>
  <updated>2012-07-19T19:26:03+12:00</updated>
  <id>http://jasonwryan.github.com/</id>
  <author>
    <name><![CDATA[Jason Ryan]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[The Myth of Breakage]]></title>
    <link href="http://jasonwryan.github.com/blog/2012/07/19/breakage/"/>
    <updated>2012-07-19T19:23:00+12:00</updated>
    <id>http://jasonwryan.github.com/blog/2012/07/19/breakage</id>
    <content type="html"><![CDATA[<p><img class="left" src="https://dl.dropbox.com/u/261312/Blog-images/broken.jpg" title="Image of breakage on Flickr" >
Breakage is one of the memes of the Arch Linux community; it is referenced frequently on the
<a href="https://bbs.archlinux.org/" title="Arch Linux BBS">Arch boards</a> and in the various
<a href="https://wiki.archlinux.org/index.php/IRC_Channels" title="Wiki page listing channels">IRC channels</a>.
It doesn't take newcomers long to realize that, whether something is actually broken or not,
there is always
<a href="http://allanmcrae.com/category/arch-linux/" title="Allan's Blog">someone they can blame</a>.<sup>1</sup></p>

<p>My experience of Arch, over the last three and a bit years, is quite the opposite. I have yet to
experience anything that would qualify as breakage. Sure, there have been bugs, mostly upstream,
and the more frequent moments where I haven't been as diligent as I should, but not once have I
had a machine that was unbootable or otherwise unusable. Arch has, on both my home and work
machines, been incredibly stable and reliable.</p>

<p>For a number of Arch Linux users, however, that was not their experience over the last week when
<a href="http://www.archlinux.org/news/the-lib-directory-becomes-a-symlink/" title="News item on the move">/lib was moved to /usr/lib</a>.
The volume of people on the boards and on IRC reporting unbootable or unusable systems was
remarkable. Remarkable because, despite the fact that the
<a href="http://www.archlinux.org/news/the-lib-directory-becomes-a-symlink/" title="Once more, just in case…">news item</a>, the
<a href="http://www.archlinux.org/news/the-lib-directory-becomes-a-symlink/" title="Arch wiki page on the change">wiki page</a>,
and the <a href="http://mailman.archlinux.org/pipermail/arch-announce/2012-July/000317.html" title="Mail archive">email to arch-announce</a>
all <em>explicitly</em> warned people not to use the <code>--force</code> option,<sup>2</sup> so many did.</p>

<p><span class='pullquote-right' data-pullquote='90% of the breakage was because people either didn&#8217;t see, or disregarded, that advice. '>
Sadly, these red-boxed warnings were apparently not enough.
90% of the breakage was because people either didn't see, or disregarded, that advice.
The remaining 10% were either in a hurry and didn't pay close attention to how
to deal with any leftover files in <span class="file">/lib</span> or <code>rm -rf</code>'ed
in the wrong directory.
<a href="http://www.gnu.org/fun/jokes/shit-happens.html" title="GNU Humour…">Accidents happen</a>.
</span></p>

<p>What I am interested in is the people who fell into the much larger category,
and principally those that didn't see any of the communications about this
change in advance of updating and reasoned, based on a recent change that did
<a href="http://www.archlinux.org/news/filesystem-upgrade-manual-intervention-required-1/" title="News item on filesystem upgrade">require the use of --force</a>,
that this was the most expedient way to resolve <code>pacman</code> reporting conflicting
files.</p>

<p>Some context. The <code>glibc</code> update was released to the
<a href="https://wiki.archlinux.org/index.php/Testing#.5Btesting.5D" title="Wiki entry on Testing">[testing] repository</a>
in the first week of July: and there were a couple of long threads<sup>3</sup>
about issues and fixes before it was pushed to [core]. By the time the
package was released for general consumption, it had been tested and the
developers had obviously planned how to make what is a fundamental system
change with a minimal amount of user intervention.  I think that, given the
magnitude of the challenge, they did a superb job.</p>

<p>How then did it go so wrong for so many?<sup>4</sup> To answer that, you have
to consider the nature of Arch. It's <em>not</em> the sort of distribution where you
install it and then just go on your merry way, installing
<a href="http://oswatershed.org/" title="It's SCIENCE, Jim">the least obsolete packages</a>,
revelling in the speed of the package manager and generally being
a 1337 h@x0r…</p>

<p>Successfully running a rolling release like Arch, irrespective of your level of
competence, means staying in touch with what is happening—in
<a href="http://kmkeen.com/pacmatic/" title="Pacman wrapper that pulls news updates">some form or other</a>.
Subscribing to the arch-general <acronym title="Mailing list">ML</acronym>,
visiting the forums, idling in IRC; somehow remaining connected to what is
going on in the community so that you don't blindly update one day and wonder
why your system is broken.</p>

<p>This strikes me as a real strength; by design Arch encourages its users to
participate in the community. Even if you are only lurking, over time you will
inevitably find yourself posting in a thread, responding to an email, editing
the wiki,
<a href="http://jasonwryan.com/blog/2012/03/09/aurphan/" title="Post on aurphan">adopting an orphaned package</a>—increasingly
getting involved and contributing.</p>

<p>This level of involvement is not for everyone. Some may find it onerous or
a waste of their time. That's fine. There are any number of other distros
that do not ask for this level of commitment. The <em>quid pro quo</em> for
running Arch, though, is that you are prepared, in whatever shape or form
best works for you, to give something back; at the very least, that is your
attention.</p>

<h4>Notes</h4>

<ol>
<li><p>This is, of course, a reference to said Arch meme: Allan is one
of the developers who has contributed an enormous amount to Arch and the fact
that his IRC nick is <code>allanbrokeit</code> is purely coincidental.</p></li>
<li><p>At the end of 2011, the short option <code>-f</code>
<a href="http://mailman.archlinux.org/pipermail/pacman-dev/2011-October/014589.html" title="Post to ML anouncing change">was removed</a>
from <code>pacman</code> so “it at least makes people read the word 'force' and maybe they
will have some sense to step back and think about what they are doing first.”</p></li>
<li><p><a href="https://bbs.archlinux.org/viewtopic.php?id=144620">https://bbs.archlinux.org/viewtopic.php?id=144620</a> and
<a href="https://bbs.archlinux.org/viewtopic.php?id=144616">https://bbs.archlinux.org/viewtopic.php?id=144616</a></p></li>
<li><p>Relatively speaking. In situations like this, the overwhelming amount of traffic
is about what went wrong, not people posting to say they had no difficulties whatsoever…</p></li>
</ol>


<p>Creative Commons image on Flickr from
<a href="http://www.flickr.com/photos/daviddoctorrose/431786001/" title="Broken keyboard on Flickr">djeucalyptus</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Replacing Grub With Syslinux]]></title>
    <link href="http://jasonwryan.github.com/blog/2012/07/09/syslinux/"/>
    <updated>2012-07-09T13:51:00+12:00</updated>
    <id>http://jasonwryan.github.com/blog/2012/07/09/syslinux</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://dl.dropbox.com/u/261312/Blog-images/grub.jpg" title="Image of grub on Flickr" >
With the announcement late last month that
<a href="http://lists.gnu.org/archive/html/grub-devel/2012-06/msg00093.html" title="Grub ML announcement">Grub 2.00 has been released</a>
I thought that it was time to stop procrastinating and do something about moving away from
<a href="http://www.gnu.org/software/grub/grub-legacy.html" title="Gnu Page for Grub Legacy">Grub Legacy</a>,
which is no longer actively developed. Not that there is anything wrong with Grub Legacy's
functionality; it has always done whatever I asked of it (admittedly, not a lot) and done so
without complaint.</p>

<p>I have used Grub2 before, when I was running Ubuntu on my home desktop, and it is the bootloader
on my Debian Squeeze server. I can't, however, say that I have ever really understood—or
appreciated—its mutliple file, “need to reconfigure after making any changes” type of
complexity. So, I thought that I would give
<a href="http://www.syslinux.org/wiki/index.php/The_Syslinux_Project" title="Syslinux Wiki">Syslinux</a>
a shot.</p>

<p>Syslinux isn't a single bootloader, rather it is a collection of lightweight bootloaders,
with <a href="http://www.syslinux.org/wiki/index.php/EXTLINUX" title="Extlinux page on Syslinux Wiki">Extlinux</a>
responsible for booting ext2, ext3, ext4 and btrfs filesystems. As the
<a href="https://wiki.archlinux.org/index.php/Syslinux" title="The FINE Wiki">Arch Wiki Syslinux page</a>
notes, since Syslinux 4, Extlinux has been merged with Syslinux.</p>

<p>Installing Syslinux is <em>ridiculously</em> easy. It is literally a five step process. First,
install the package:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><pre><code class=''><span class='line'>pacman -S syslinux</span></code></pre></div></figure></notextile></div></p>

<p>After installing <code>syslinux</code> pacman will helpfully tell you what to do next:</p>

<p><blockquote><p>==> If you want to use syslinux as your bootloader<br/>==> edit /boot/syslinux/syslinux.cfg and run<br/>==>   # /usr/sbin/syslinux-install_update -i -a -m<br/>==> to install it.</p></blockquote></p>

<p>Arch user <a href="http://pyther.net/" title="Matthew's website">Matthew Gyurgyik</a> has written an
ingenious script, <code>syslinux-install_update</code> that automates the process of writing the
<acronym title="Master Boot Record">MBR</acronym> and installing the relevant files to
<span class="file">/boot/syslinux/</span>. The script also checks if, as is the case
with my desktop, there is a RAID array present, and if so passes the install command the
<code>--raid</code> flag:</p>

<p><blockquote><p>RAID mode.  If boot fails, tell the BIOS to boot the next device in the boot sequence (usually the next  hard<br/>disk) instead of stopping with an error message.  This is useful for RAID-1 booting.</p></blockquote></p>

<p>After running the script, you should receive a message advising you that Syslinux
has been sucessfully installed on both drives:</p>

<p><blockquote><p>Detected RAID on /boot - installing Syslinux with --raid<br/>Syslinux install successful<br/>Boot Flag Set - /dev/sda1<br/>Boot Flag Set - /dev/sdb1<br/>Installed MBR (/usr/lib/syslinux/mbr.bin) to /dev/sda<br/>Installed MBR (/usr/lib/syslinux/mbr.bin) to /dev/sdb</p></blockquote></p>

<p>If you are moving from Grub Legacy, configuring Syslinux is similarly painless.
There are two sections to a basic  <span class="file">/boot/syslinux/syslinux.cfg</span>,
the defaults and the prompt entries.</p>

<p>I set up my defaults to be essentially invisible:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><pre><code class=''><span class='line'># General settings
</span><span class='line'>DEFAULT Arch
</span><span class='line'>PROMPT 0
</span><span class='line'>TIMEOUT 0</span></code></pre></div></figure></notextile></div></p>

<p>And then copy across the relevant lines from my <span class="file">/boot/grub/menu.lst</span>:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>grep <span class="nv">root</span><span class="o">=</span> /boot/grub/menu.lst &gt;&gt; /boot/syslinux/syslinux.cfg
</span></code></pre></div></figure></notextile></div></p>

<p>Then it is just a matter of adding the relevant entries under LABEL:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><pre><code class=''><span class='line'>LABEL Arch
</span><span class='line'>   MENU LABEL Arch Linux
</span><span class='line'>   LINUX ../vmlinuz-linux
</span><span class='line'>   APPEND root=/dev/mapper/vgroup-lvroot cryptdevice=/dev/md1:vgroup ro
</span><span class='line'>   INITRD ../initramfs-linux.img</span></code></pre></div></figure></notextile></div></p>

<p>You then add entries for Fallback, and any other images that you may wish to
boot from.</p>

<p>And that, in their entirety, is steps two and three. You then move to steps four and five:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><pre><code class=''><span class='line'>pacman -Rsn grub
</span><span class='line'>shutdown -r now</span></code></pre></div></figure></notextile></div></p>

<p>And you reboot with Syslinux. Done.</p>

<p>The beauty of Syslinux, from my perspective, is that it is simple to install
and configure, with just the one config file and the options all well documented
and easy to understand. If you want a menu with a background
image, you can have that. If, like me, you just want to get on and boot your default,
it does that.</p>

<p>Additionally, if you want or need to boot into Fallback, or want to dual boot,
you can just hold down <kbd>Shift</kbd> at boot time and enter the desired
Label at the prompt. Syslinux has Tab completion, so you only need enter a
couple of letters, hit <kbd>Tab</kbd> and you will see all of the available
Labels to boot. Brilliant.</p>

<h4>Notes</h4>

<p>Creative Commons Flickr image by
<a href="http://www.flickr.com/photos/sgodt/5103674184/">custer_fluck</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Misunderstanding Arch]]></title>
    <link href="http://jasonwryan.github.com/blog/2012/06/16/misunderstanding/"/>
    <updated>2012-06-16T10:52:00+12:00</updated>
    <id>http://jasonwryan.github.com/blog/2012/06/16/misunderstanding</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://dl.dropbox.com/u/261312/Blog-images/hands.jpg" title="'mutt logo'" ></p>

<p>I am frequently struck by how many people arrive on the
<a href="https://bbs.archlinux.org/" title="Arch Linux Forums">Arch boards</a> without <em>any</em>
understanding of how Arch is different from the other GNU/Linux communities
they may have spent time with (if, indeed, they have spent any time in
another community before trying Arch). For me, this is akin to arriving in a
foreign country and not bothering to familiarize yourself at all with the local
mores and customs; it lies on a spectrum somewhere between ignorance and
outright arrogance.</p>

<p>The result, inevitably, is that these people are shocked
when their expectations of how they <em>should</em> be treated are at odds with the
reception their behaviour invites…</p>

<p>Before venturing any further, I should preface my remarks about this with
something of a disclaimer. These are my own views and not those of the current,
or past, forum staff.</p>

<p>One of Arch's significant acheivements is the quality of
<a href="https://wiki.archlinux.org" title="THE best GNU/Linux Wiki">its documentation</a>.
Not just the technical documentation describing how to install and configure
Arch, but the cultural documentation that sets out
<a href="https://wiki.archlinux.org/index.php/The_Arch_Way" title="The Arch Way">Arch's philosophy</a>
and <a href="https://wiki.archlinux.org/index.php/Forum_Etiquette" title="Forum Etiquette">standards of behaviour</a>. Both these pages provide clear statements on what to expect when
using Arch Linux and a clear indication of how to respectfully interact with the
community when you are seeking help.</p>

<p>The defining statement about Arch's intended user base is quite direct and
unambiguous:</p>

<p><blockquote><p>Arch Linux targets and accommodates competent GNU/Linux users<br/>by giving them complete control and responsibility over the system.</p><footer><strong>The Arch Way</strong> <cite><a href='https://wiki.archlinux.org/index.php/The_Arch_Way#User-centric'>wiki.archlinux.org/index.php/&hellip;</a></cite></footer></blockquote></p>

<p>The expression “targets and accommodates” doesn't exclude other users—for
example, those that are not necessarily competent, but are wanting to learn
more about the specifics of how their machines work—it does, however, signal
quite explicitly what sort of community Arch is. And what it is not.</p>

<p><a href="http://ubuntu.com" title="Ubuntu Linux">Ubuntu</a> is an excellent distribution. Like Arch,
it has very specific aims and a clear concept of what the Ubuntu community is.
Popularity is central to Ubuntu's culture. People coming from Ubuntu, who
haven't bothered to familiarize themselves with Arch's values, often struggle
to appreciate the difference; leading to comments like this one:</p>

<p><blockquote><p>Maybe if Arch is friendly and Arch forum is friendly, it might go some<br/>place, who knows…</p><footer><strong>Linux Journal commenter</strong> <cite><a href='http://www.linuxjournal.com/content/arch-way#comment-361974'>www.linuxjournal.com/content/&hellip;</a></cite></footer></blockquote></p>

<p>This was posted in reply to a post on Arch in which the author noted how to
seek help with Arch Linux:</p>

<p><blockquote><p>You'll find far less hand-holding on the Arch Forums than some of the other<br/>distro's forums, and for good reason.  Arch has one of the most informative,<br/>user-friendly wiki's out there. Do not, I repeat, DO NOT ask a question in the<br/>forums or on IRC without searching the wiki and the forums first.</p></blockquote></p>

<p>Similarly, looking through the threads in
<a href="https://bbs.archlinux.org/viewforum.php?id=23" title="Newbie board">Newbie Corner</a>
will periodically turn up new posters who are indignant at being told to
<acronym title="Read The Fscking Manual">RTFM</acronym> and see it as some
sort of <em>personal</em> attack, when in fact it is just someone pointing out the
obvious to them. The community hasn't compiled all that documentation just
so they can sit around and regurgitate answers for people who are either
unwilling or incapable of making the minimum amount of  effort required to
solve their own problems…</p>

<p>If you want handholding, there are plenty of online communities that will
cater for you. If you install Arch and think that you are automatically entitled
to immediate support for issues that you encounter, then you are mistaken.
If you think that Arch will suffer if you don't get what you want, then
your problems extend significantly beyond your choice of distro.</p>

<p>The community has worked hard over the years to keep the signal-to-noise ratio
on the boards high, that way, the forums remain a helpful resource for the community,
not a breeding ground for
<a href="http://jasonwryan.com/blog/2012/03/17/vampires/" title="Post on parasites…">help vampires</a>.</p>

<h4>Notes</h4>

<p>Flickr Creative Commons image by
<a href="http://www.flickr.com/photos/angellic/47031159/">si_si_ay</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Using Notmuch with mutt]]></title>
    <link href="http://jasonwryan.github.com/blog/2012/05/23/notmuch/"/>
    <updated>2012-05-23T19:37:00+12:00</updated>
    <id>http://jasonwryan.github.com/blog/2012/05/23/notmuch</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://dl.dropbox.com/u/261312/Blog-images/magnifier.png" title="day 307 on Flickr" >
Seeing as I have been focussing on my mail client, I thought I would round out the trifecta of
<a href="http://www.mutt.org/" title="mutt homepage">mutt</a> posts<sup>1</sup> with what I am assuming is the
final piece of the puzzle: searching <code>mutt's</code> maildirs. For a small to average size mailbox, <code>mutt's</code>
searching works fine, but as your mail volume grows this simple search doesn't really scale. That's
where the rather modestly named <a href="http://notmuchmail.org/" title="Notmuch website">Notmuch</a> comes into play.</p>

<p>It can be run as a standalone mail client, but you can also use it with <code>mutt</code> to provide
a ruthlessly efficient and fast search tool for your email. I had looked at it and
<a href="http://sup.rubyforge.org/" title="A console client for people with lots of mail">Sup</a>
a couple of years ago, but was spurred to do something about it this week when
<a href="https://twitter.com/#!/chosig" title="Chosig on Twitter">Gunnar Lundström</a> pinged me on twitter and
suggested I check it out. So I did.</p>

<p><blockquote><p>"Not much mail" is what Notmuch thinks about your email collection. Even if you receive 12000<br/>messages per month or have on the order of  millions of messages that you've been saving for decades.<br/>Regardless, Notmuch will be able to quickly search all of it. It's just plain not much mail.</p><footer><strong>Notmuch website</strong> <cite><a href='http://notmuchmail.org'>notmuchmail.org/&hellip;</a></cite></footer></blockquote></p>

<p>There was previously a
<a href="http://upsilon.cc/~zack/blog/posts/2011/01/how_to_use_Notmuch_with_Mutt/">mutt-notmuch script</a>
for integrating the two, but the functionality was included upstream at the start of this year
so it is quite straightforward to set it up. There is a
<a href="http://aur.archlinux.org/packages.php?ID=36289" title="Arch User Repository package">package in the AUR</a>
but it is intended as the full mail client, complete with, <em>shudder</em>, emacs support amongst
other things. I have stripped out the uneeded bindings and included the relevant <code>perl</code> libraries in a
<a href="https://bitbucket.org/jasonwryan/centurion/src/6ff0f252961f/Build/notmuch/PKGBUILD" title="…in my bitbucket repo">modified PKGBUILD</a>
if you just want the basic search with <code>mutt</code>.</p>

<p>Otherwise, you'll need to step through it manually.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>pacman -S perl perl-mailtools perl-mail-box perl-string-shellquote
</span><span class='line'>cowerd notmuch perl-term-readline-gnu
</span></code></pre></div></figure></notextile></div></p>

<p>As you will see from the PKGBUILD, you will need to copy the <code>notmuch-mutt</code> script
into your <code>$PATH</code>: you'll find it in <span class="file">contrib/notmuch-mutt/</span>.</p>

<p>There is a simple interative setup, which you can complete before running the index the first time:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>notmuch setup
</span><span class='line'>notmuch new
</span></code></pre></div></figure></notextile></div></p>

<p>The final step is to copy across the <code>mutt</code> macros included with the script:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>cat src/notmuch-0.13/contrib/notmuch-mutt/notmuch-mutt.rc &gt;&gt; <span class="nv">$HOME</span>/.mutt/muttrc
</span></code></pre></div></figure></notextile></div></p>

<p>Now, from within <code>mutt</code>, <kbd>F8</kbd>, <kbd>F9</kbd> and <kbd>F6</kbd> will respectively
search, create the relevant threads from search results, and tag mails with <code>notmuch</code>.</p>

<p>As I use <code>offlineimap</code> to retrieve my mail, I simply added <code>notmuch new</code> to the script that
runs as a <code>cron</code> job to synch my mail and <code>notmuch</code> reindexes all of my mail as soon as it arrives.</p>

<h3>Updated 27/5/12</h3>

<p>Two of the <code>mutt</code> macros that are shipped in <span class="file">contrib/notmuch-mutt/notmuch-mutt.rc</span>
do not work. I have written a patch to fix this and
<a href="http://notmuchmail.org/pipermail/notmuch/2012/011263.html" title="Patch on notmuch list">posted it to the ML</a>.</p>

<h4>Notes</h4>

<ol>
<li><a href="http://jasonwryan.com/blog/2012/04/21/lbdb/">Using mutt, LDAP and SSL</a> and
<a href="http://jasonwryan.com/blog/2012/05/12/mutt/">mutt and HTML email</a></li>
</ol>


<p>Creative Commons image by
<a href="http://www.flickr.com/photos/mjtmail/3008566512/in/photostream/">mjtmail on Flickr</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[mutt and HTML email]]></title>
    <link href="http://jasonwryan.github.com/blog/2012/05/12/mutt/"/>
    <updated>2012-05-12T15:49:00+12:00</updated>
    <id>http://jasonwryan.github.com/blog/2012/05/12/mutt</id>
    <content type="html"><![CDATA[<p><img class="left" src="http://dl.dropbox.com/u/261312/Blog-images/mutt-1.png" title="'mutt logo'" ></p>

<p>Following on from my <a href="http://jasonwryan.com/blog/2012/04/21/lbdb/" title="Using mutt, LDAP and SSL">last post about mutt</a>,
I have been tinkering more with the most suckless of mail clients to
get it to deal with—of all things—<acronym title="HyperText Markup Language">HTML</acronym>
emails. I will preface this post with a remark or two that amounts to a warning about
intemperate language, ranting and a generally cranky disposition: repeated contact with
email marketers can do that to you…</p>

<p>A further  brief digression is warranted here. HTML email is, without doubt,
evidence of the imminent end of civilized life as we know it; much like the
<a href="http://en.wikipedia.org/wiki/Places_in_The_Hitchhiker's_Guide_to_the_Galaxy#Golgafrincham" title="Wikipedia entry on HHGTTG">Golgafrincham diaspora</a>, it is attributable to a depraved cabal of marketing consultants
and provides the same level of social good as syphilis and fistulas. Suffice to say, it is a blight.</p>

<p>Sadly, it is a blight that I have to deal with. Up until now, I had done that by using the
excellent <a href="http://w3m.sourceforge.net/" title="w3m homepage on sourceforge">w3m</a> to render
HTML as text in mutt itself. That is accomplished easily enough with an entry in
<span class="file">muttrc</span> and another in a <span class="file">mailcap</span> file.</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>~/.mutt/muttrc </span></figcaption>
 <div class="highlight"><pre><code class='sh'><span class='line'>auto_view text/html                                      <span class="c"># view html automatically</span>
</span><span class='line'>alternative_order text/plain text/enriched text/html     <span class="c"># save html for last</span>
</span></code></pre></div></figure></notextile></div></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>~/.mutt/mailcap </span></figcaption>
 <div class="highlight"><pre><code class='sh'><span class='line'>text/html; w3m -I %<span class="o">{</span>charset<span class="o">}</span> -T text/html; copiousoutput;
</span></code></pre></div></figure></notextile></div></p>

<p>This works for 80 percent of the HTML email I get. It is enough to confirm that the mail is useless
and can be discarded. The other 20 percent, however, is slightly more problematic. The initial
view in w3m is enough to tell me that, due to the outstanding incompetence of the idiots that
generated the email, there <em>is</em> actually some information that is contained in the email that I need
to access <strong>but it is not viewable in a text browser.</strong></p>

<p><img class="left" src="http://dl.dropbox.com/u/261312/Blog-images/mutt-2.png" title="'An example…'" ></p>

<p>For this special level of retardation, I need to be able to open the email in a ghraphical browser.
As I use vimprobable, that means sending the file to
<a href="http://jasonwryan.com/blog/2011/06/26/using-vimprobable/" title="My post on Using vimprobable">vimprobable running in tabbed</a>. Fortunately, as you would expect with superior software,
<code>mutt</code> has a way of handling this gracefully. In mutt's extensive documentation, there is a
<a href="http://www.mutt.org/doc/manual/manual-5.html" title="Go and read it…">page on mutt's MIME support</a>
that details how to set up a graduated response to this pernicious issue:</p>

<p><blockquote><p>In addition, you can use this with Autoview to denote two commands for viewing<br/>an attachment, one to be viewed automatically, the other to be viewed<br/>interactively from the attachment menu.</p><footer><strong>mutt manual</strong> <cite><a href='http://www.mutt.org/doc/manual/manual-5.html'>www.mutt.org/doc/manual/&hellip;</a></cite></footer></blockquote></p>

<p>So, you can have <code>mutt</code> render the HTML abomination in <code>w3m</code> in most cases, and when those
instances of particularly cretinous behaviour make it to your inbox, you can choose to
view them in your web browser. In my case, by altering the <span class="file">mailcap</span>
entry to look like this:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>text/html; vimprobtab.sh %s &amp;; <span class="nb">test</span><span class="o">=</span><span class="nb">test</span> -n <span class="s2">&quot;$DISPLAY&quot;</span>; needsterminal;
</span><span class='line'>text/html; w3m -I %<span class="o">{</span>charset<span class="o">}</span> -T text/html; copiousoutput;
</span></code></pre></div></figure></notextile></div></p>

<p>The first entry tests that X is running, and if it is, it hands the file to <code>vimprobable</code>. The
default, however, is determined by the <code>copiousoutput</code> tag. So, in <code>mutt</code> it is just a matter
of hitting <kbd>v</kbd> to view the attached HTML and then <kbd>m</kbd> to send it to <code>mailcap</code>.
For convenience, I bind <kbd>Enter</kbd> to that function in <span class="file">muttrc</span>:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'><span class="nb">bind </span>attach &lt;<span class="k">return</span>&gt;    view-mailcap
</span></code></pre></div></figure></notextile></div></p>
]]></content>
  </entry>
  
</feed>
