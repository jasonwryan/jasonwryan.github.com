
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Using Syncthing - jasonwryan.com</title>
  <meta name="author" content="Jason Ryan">

  
  <meta name="description" content="Just over a year ago, I was invited to participate in an exciting Alpha, for
BitTorrent Sync.
I wrote up my experience
and, with one reservation, &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jasonwryan.com/blog/2014/05/10/syncthing/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="jasonwryan.com" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!-- OpenId login -->
<link rel="openid2.provider" href="https://openid.stackexchange.com/openid/provider">
<link rel="openid2.local_id" href="https://openid.stackexchange.com/user/e970c157-315b-49b2-8b30-1d8a64215d0f">

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-907012-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">jasonwryan.com</a></h1>
  
    <h2>Miscellaneous ephemera…</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.duckduckgo.com/" method="get">
  <fieldset role="search">
    <input type="hidden" name="sites" value="jasonwryan.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact.html">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Using Syncthing</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-10T09:30:00+12:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:30 am</span></time>
        
      </p>
    
  </header>


<div class="entry-content"><p><img class="left" src="/images/post_images/syncthing.png" title="Syncthing logo" >
Just over a year ago, I was invited to participate in an exciting Alpha, for
<a href="http://www.bittorrent.com/sync" title="Sync website), an application
that allows you to sync selected directories across devices using a
[peer-to-peer protocol](https://en.wikipedia.org/wiki/Bittorent 'Wikipedia article">BitTorrent Sync</a>.
I <a href="http://jasonwryan.com/blog/2013/03/16/sync/" title="Click the damn thing…">wrote up my experience</a>
and, with one reservation, found it to be a fantastic tool that did pretty much everything I
needed, including letting me finally get rid of Dropbox. That one reservation, although not
entirely clear at the time, was clarified soon after and was crushingly disappointing:
the programme was closed source.</p>

<p>Due to a combination of inertia (it was installed on all my devices and working well) and
the lack of an alternative that didn&rsquo;t involve installing and running a
<a href="https://en.wikipedia.org/wiki/Lamp_stack" title="Wikipedia page">LAMP stack</a> just to sync
my files, I have persisted with it; even writing a
<a href="http://jasonwryan.com/blog/2013/11/14/api/" title="Post on said script">simple Awk script</a>
to interact with the <acronym title="Application Program Interface">API</acronym>.
For the last twelve months I have been pretty happy with it.</p>

<p>In addition to the licensing choice, there are some other small issues that I have discovered: the
<a href="https://play.google.com/store/apps/details?id=com.bittorrent.sync" title="On Google Play">Android App</a>
<em>chews</em> through your battery if it is left on (which sort of defeats the purpose, but I
learned to live with it), the syncing can take a little while to pick up changes, and
nodes that don&rsquo;t see much action may flake out completely after a while.</p>

<p>Then, a few weeks ago I read about <a href="https://github.com/jewel/clearskies" title="On Github">clearskies</a>,
an open source implementation of this concept. Sadly, it is still a proof of
concept. This discovery, however, led to an extremely fortuitous exchange
<a href="https://twitter.com/csantosb/status/460714748322258944" title="Twitter conversation">on Twitter</a>
with <a href="https://twitter.com/csantosb" title="His profile on Twitter">cayetano santos</a> who pointed me
at <a href="http://syncthing.net/" title="Syncthing homepage">Syncthing</a>. Described thus (cue
<a href="http://www.youtube.com/watch?v=7YaGwI7GjlA" title="G.F. Handel on Youtube">background music</a>):</p>

<blockquote><p>Syncthing replaces Dropbox and BitTorrent Sync with something open, trustworthy and decentralized. Your data is your data alone and you deserve to choose where it is stored, if it is shared with some third party and how it's transmitted over the Internet.</p></blockquote>


<p>Written in <a href="http://golang.org/" title="Go language site">Go</a>, Syncthing is still in
early development, but judging by the
<a href="https://github.com/calmh/syncthing/releases" title="Releases on Github">release history</a>,
it is moving ahead quickly. The developer, <a href="https://nym.se/" title="Jakob's site">Jakob Borg</a>,
is obviously both talented and productive. After using it for the last
couple of weeks, I have uninstalled BitTorrent Sync from all my machines
and have Syncthing set up and running nicely. It is simple, elegant and
works wonderfully; <em>for what it does</em>.</p>

<p>Which is to say that it is not all of the things that either of its
predecessors are: it isn&rsquo;t intended to distribute files, or to host images or
simple websites. It doesn&rsquo;t include versioning or have a built-in editor. It is
for securely syncing your files independent of any third parties. And there is no
Android app, so your battery is safe<sup>1</sup>.</p>

<p>Setup is through a tidy, <a href="http://getbootstrap.com/" title="Bootstrap site">bootstrap</a>
built web interface, by default running on <code>127.0.0.1:8080</code>. I subsequently found
that once I understood how the configuration worked, editing the config file at
<span class="file">$XDG_CONFIG_HOME/syncthing/config.xml</span> was much
simpler.  When setting up, you will also do a lot of stopping and starting of
<code>syncthing</code>; if you use the service file that comes with the
<a href="https://aur.archlinux.org/packages/syncthing/" title="Arch User Repo">AUR package</a>,
that won&rsquo;t work so well from the web interface… Run it from the command line
with one of the <code>STTRACE</code> variables to debug and then, once it is running to
your liking, hand it off to systemd<sup>2</sup>.</p>

<p>With a reasonably tricky cluster setup (six machines; two outside the
<acronym title="Local Area Network">LAN</acronym> sharing half a dozen
repositories with three different topologies), there is a fair bit of trial and
error involved getting everything set up and working correctly. But when you
do, it is much faster to pick up changes than either of the other two and there
is none of the risk around privacy and security presented by Dropbox and—to a
(much, I would hazard to guess) lesser extent—BitTorrent Sync.</p>

<p>I have also found that it is much quicker for all of the nodes connect if,
for the LAN connections in your cluster, you specify the
<acronym title="Internet Protocol">IP</acronym> addresses and port and disable
global discovery for those nodes: this speeds up the discovery time when
the nodes are started. Nodes still, from time-to-time, flake out, particularly
if one of them is rebooted. Restarting the offending node is usually sufficient
to bring the cluster back into sync.</p>

<p>That isn&rsquo;t to say that there aren&rsquo;t any issues with it. The documentation is in
need of some work; your best bet at the moment is a combination of the rather
terse <code>--help</code> message and reading the source. There are also some hidden gems
in the Github commits; for example, details on using
<span class="file">.stignore</span> files, a very handy feature, are buried in
an earlier
<a href="https://github.com/calmh/syncthing/commit/986b15573a66f95beae53b10371ba50ab147124a" title="Github commit">commit to README.md</a> that didn&rsquo;t survive the move of the documentation to the
forum.</p>

<p>The only other significant issue I have encountered is that getting all of the
nodes across the cluster to connect to each other at the same time seems to be
inexplicably difficult. It may just be my setup, but more often than not, nodes
(on the LAN) will timeout while trying to connect to at least one of their peers.
This isn&rsquo;t a huge issue as you only really need one chained connection to bring
all the data up to date, but it does cause a something of a minor
<acronym title="Obsessive Compulsive Disorder">OCD</acronym> flare up.</p>

<p>Given the early stages of the project, though, and the fact that it is open
source, these anomalies are trivial. Overall, Syncthing is a delight. It does
exactly what I need it to do, and it does it securely. Given the promise it is
showing this early, I can only imagine it getting a lot better over time as
more
<a href="https://github.com/calmh/syncthing/issues?state=open" title="Issues on Github">bugs are squashed</a>
and features rolled out.</p>

<h4>Notes</h4>

<ol>
<li>Naturally enough, someone is <a href="https://github.com/calmh/syncthing/issues/177">on the case</a>…
<strong>Update: 17/5/14</strong> App is available on
<a href="https://play.google.com/store/apps/details?id=com.nutomic.syncthingandroid">Google Play</a> and it works pretty well.</li>
<li>I added a debian daemon script to a thread on
<a href="http://discourse.syncthing.net/t/keeping-syncthing-running/30/2">the Syncthing boards</a>
as there is no built in daemon functionality (yet).</li>
</ol>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jason Ryan</span></span>

      




<time class='entry-date' datetime='2014-05-10T09:30:00+12:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:30 am</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/archlinux/'>archlinux</a>, <a class='category' href='/blog/categories/backup/'>backup</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/05/03/standards/" title="Previous Post: Minimum Standards">&laquo; Minimum Standards</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/05/30/tunnels/" title="Next Post: Browser tunnels">Browser tunnels &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/01/19/overlayfs/">Playing with overlayfs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/25/snapclean/">Pruning Tarsnap Archives</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/20/multiarch/">Multi-arch Packages in AUR</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/06/reminder/">Simple Reminders</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/23/asp/">Building from Source</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll...</ul>
  <p><a href="http://pinboard.in/u:jasonwryan">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "jasonwryan"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="librefm">
<h1>Listening to</h1>
<style type="text/css">
  #librefmList li{ text-align: left; }
</style>
<ul id="librefmList">
  <li class="loading">Updating tracks...</li>
</ul>
<p><a href="http://alpha.libre.fm/user/jasonwryan">My tunes on Libre.fm &raquo;</a></p>

<script lang="Javascript">
    /*
     * JavaScript Pretty Date
     * Copyright (c) 2011 John Resig (ejohn.org)
     * Licensed under the MIT and GPL licenses.
     */

    // Takes an ISO time and returns a string representing how
    // long ago the date represents.
    function prettyDate(time){
        diff = ((new Date()).getTime()/1000 - time),
        day_diff = Math.floor(diff / 86400);

      if ( isNaN(day_diff) || day_diff < 0 || day_diff >= 31 )
        return;

      return day_diff == 0 && (
          diff < 60 && "just now" ||
          diff < 120 && "1 minute" ||
          diff < 3600 && Math.floor( diff / 60 ) + " minutes" ||
          diff < 7200 && "1 hour" ||
          diff < 86400 && Math.floor( diff / 3600 ) + " hours") ||
        day_diff == 1 && "Yesterday" ||
        day_diff < 7 && day_diff + " days" ||
        day_diff < 31 && Math.ceil( day_diff / 7 ) + " weeks";
    }
</script>
<script lang="Javascript">
    function showLibrefmFeed(json){
        if(json.recenttracks == 'undefined'){
            return
        }

        var tracklist = document.getElementById('librefmList'),
            content = '';

        $.each(json.recenttracks.track, function(i, track){
            var interval = prettyDate(track.date['uts']);
            content += '<li id="librefmItem_'+i+'"><a href="'+ track.url + '">' + track.name +'</a> by '+ track.artist['#text'] + '<span class="date"> ' + interval  + ( interval == 'just now' ? '' :' ago') + '</span></li>';
        });

        tracklist.innerHTML = content;
    }
</script>
<script lang="Javascript" src="https://libre.fm/2.0/?method=user.getrecenttracks&user=jasonwryan&page=1&limit=5&format=json&callback=showLibrefmFeed""></script>

</section>

<section>
<p class="arch"><a href="http://unix.stackexchange.com/users/6761/jasonwryan">
<img src="http://unix.stackexchange.com/users/flair/6761.png" border="0" width="208" height="58" alt="profile for jasonwryan at Unix and Linux, Q&amp;A for users of Linux, FreeBSD and other Un*x-like operating systems." title="profile for jasonwryan at Unix and Linux, Q&amp;A for users of Linux, FreeBSD and other Un*x-like operating systems.">
</a></p>
</section>
<section>
<p class="arch"><a href="https://archlinux.org/" title="Arch Linux"><img src="/images/running-on-arch.png" /></a></p>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
All content licensed under <a href="http://creativecommons.org/licenses/by/2.5/" title="Creative Commons by Attribution">Creative Commons</a> 2009-2016 - Jason Ryan    
<span class="credit">This site is powered by <a href="http://vim.org">Vim</a>, <a href="http://octopress.org">Octopress</a> and <a href="http://github.com">Github</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jasonwryan';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://jasonwryan.com/blog/2014/05/10/syncthing/';
        var disqus_url = 'http://jasonwryan.com/blog/2014/05/10/syncthing/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
