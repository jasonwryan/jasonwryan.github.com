
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>jasonwryan.com</title>
  <meta name="author" content="Jason Ryan">

  
  <meta name="description" content="Vim is not just an editor (and not in the way that
Emacs is more than
just an editor);
it is for all intents and purposes a universal design pattern &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jasonwryan.com/blog/4/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="jasonwryan.com" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!-- OpenId login -->
<link rel="openid2.provider" href="https://openid.stackexchange.com/openid/provider">
<link rel="openid2.local_id" href="https://openid.stackexchange.com/user/e970c157-315b-49b2-8b30-1d8a64215d0f">

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-907012-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">jasonwryan.com</a></h1>
  
    <h2>Miscellaneous ephemera…</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.duckduckgo.com/" method="get">
  <fieldset role="search">
    <input type="hidden" name="sites" value="jasonwryan.com">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact.html">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/06/14/writing/">Writing with Vim</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-06-14T09:30:00+12:00'><span class='date'><span class='date-month'>Jun</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:30 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="left" src="/images/post_images/vimbot.jpg" title="Practical Vim cover image" >
<a href="http://www.vim.org/" title="Vim homepage">Vim</a> is not just an editor (and not in the way that
<a href="http://www.gnu.org/software/emacs/" title="GNU Emacs page">Emacs</a> is more than
<a href="http://en.uncyclopedia.co/wiki/Emacs" title="Uncyclopedia entry">just an editor</a>);
it is for all intents and purposes a universal design pattern. The concept of using
Vim&rsquo;s modes and keybinds extends from
<a href="http://jasonwryan.com/blog/2011/12/01/readline/" title="Post on readline">the shell</a>
through to <a href="http://jasonwryan.com/blog/2009/12/28/changing-keybinds-in-vifm/" title="Post on Vifm">file managers</a>
and <a href="http://jasonwryan.com/blog/2012/11/20/vimprobable/" title="Vimprobable screencast">browsers</a>.
If you so choose (and I <em>do</em>), then a significant amount of your interactions with your
operating system are mediated by Vim&rsquo;s design principles. This is undeniably a
good thing™ as it goes some way to standardising your command interface (whether at the
command line or in a <acronym title="Graphic User Interface">GUI</acronym>).</p>

<p>To that end, I have been spending more time working with Vim and trying to
improve both my understanding of it&rsquo;s capabilities, the environment in which I
use it and how I can optimise both of those conditions to not necessarily just
be more productive, but to minimise friction in my work flows.</p>

<p>A large part of my job involves writing and, happily, so does a good deal of
what constitutes my leisure activity. Whether it is emails written in
<a href="http://jasonwryan.com/blog/categories/mutt/" title="Mutt category">Mutt</a>, these blog posts,
longer documents written in <a href="http://www.latex-project.org/" title="LaTeX website">LaTeX</a>,
or just <a href="http://jasonwryan.com/blog/2014/03/22/autotext/" title="Autotext function">roboposting to forums</a>;
it is Vim all the way down. So I have spent some effort setting up Vim to make
that experience as comfortable as possible.</p>

<p><a href="/images/post_images/distract-full.png"><img class="right" src="/images/post_images/distract.png" title="Click for full-size" ></a>
The first step, and one I took several years ago now, was to write custom
<a href="https://bitbucket.org/jasonwryan/shiv/src/tip/.vim/colors/" title="In Bitbucket repo">colour schemes</a>,
depending on whether I am in the console or X. Several weeks ago, I came across a Vim plugin
called <a href="https://github.com/chrisbra/DistractFree" title="Github repo">DistractFree</a>, which
is described as “enabling a distraction free writing mode.” I had always been slightly
(well, perhaps <em>scathingly</em> would be more accurate) cynical when reading about these sorts
of things when they first started to appear, but—after playing with two or three of them—this
one has really grown on me (see the screenshot on the right).</p>

<p>I <a href="https://bitbucket.org/jasonwryan/shiv/src/tip/.vim/colors/mirowriter.vim" title="Bitbucket repo">adapted my colour scheme</a> for it, added a line to my <span class="file">~/.vimrc</span>
to enable it for specific document types, and have not looked back.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'>autocmd <span class="nb">BufRead</span> *.markdown<span class="p">,</span>*tex <span class="k">call</span> DistractFree#DistractFreeToggle<span class="p">()</span> <span class="p">|</span> <span class="k">wincmd</span> <span class="k">w</span>
</span></code></pre></td></tr></table></div></figure>


<p>The final piece was to set up spell checking  to work properly. As well as
using English, I wanted to share my personal whitelist of words between all of
my machines, so I define a location in <span class="file">~/.vimrc</span>
as well:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="k">set</span> <span class="nb">spelllang</span><span class="p">=</span>en_gb                               <span class="c">&quot; real English spelling</span>
</span><span class='line'><span class="k">set</span> <span class="nb">dictionary</span><span class="p">+=</span><span class="sr">/usr/</span>share<span class="sr">/dict/</span>words             <span class="c">&quot; use standard dictionary</span>
</span><span class='line'><span class="k">set</span> <span class="nb">spellfile</span><span class="p">=</span>$HOME<span class="sr">/Sync/</span><span class="k">vim</span><span class="sr">/spell/</span><span class="k">en</span>.utf<span class="m">-8</span>.add   <span class="c">&quot; my whitelist</span>
</span></code></pre></td></tr></table></div></figure>


<p>Then it is just a matter of ensuring that misspelled or other flagged words (like those
that should be capitalised) are highlighted correctly. This required a couple of lines in
my colour schemes:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; Spell checking  --- </span>
</span><span class='line'><span class="k">if</span> <span class="k">version</span> <span class="p">&gt;=</span> <span class="m">700</span>
</span><span class='line'>  <span class="k">hi</span> clear SpellBad
</span><span class='line'>  <span class="k">hi</span> clear SpellCap
</span><span class='line'>  <span class="k">hi</span> clear SpellRare
</span><span class='line'>  <span class="k">hi</span> clear SpellLocal
</span><span class='line'>  <span class="k">hi</span> SpellBad    ctermfg<span class="p">=</span><span class="m">9</span>
</span><span class='line'>  <span class="k">hi</span> SpellCap    ctermfg<span class="p">=</span><span class="m">3</span>    cterm<span class="p">=</span><span class="nb">underline</span>
</span><span class='line'>  <span class="k">hi</span> SpellRare   ctermfg<span class="p">=</span><span class="m">13</span>   cterm<span class="p">=</span><span class="nb">underline</span>
</span><span class='line'>  <span class="k">hi</span> SpellLocal  cterm<span class="p">=</span>None
</span><span class='line'><span class="k">endif</span>
</span></code></pre></td></tr></table></div></figure>


<p>The most significant change, however, was that I recently purchased a hard
copy of Drew Neill&rsquo;s excellent
<a href="http://pragprog.com/book/dnvim/practical-vim" title="Just buy it, now…">Practical Vim</a>. I
have long been a fan of Drew&rsquo;s excellent podcast, <a href="http://vimcasts.org/" title="Drew's site">Vimcasts</a>,
and the book is every bit as impressive as the collection of those episodes,
and more.  Reading it on my commute over the last week, I have been constantly
amazed at the power and flexibility of this editor and Drew&rsquo;s ability to clearly
articulate how to work economically and efficiently with it.  I&rsquo;m convinced
this is an invaluable resource for anyone that currently uses Vim or wants to
learn.</p>

<p>I expect that, over time, as I become more proficient with Vim, that I will adapt
some of these settings, but for the time being they feel very comfortable and allow
me to focus on hacking words together (and to do the occasional bit of
<a href="https://bitbucket.org/jasonwryan/shiv/src/tip/Scripts/" title="Scripts in Bitbucket">scripting on the side</a>)…</p>

<h4>Notes</h4>

<p>Image is from the cover of Drew Neill&rsquo;s
<a href="http://pragprog.com/book/dnvim/practical-vim">Practical Vim</a>, by
<a href="http://en.wikipedia.org/wiki/Ben_Cormack">Ben Cormack</a>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/30/tunnels/">Browser tunnels</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-30T09:32:00+12:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>30</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:32 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="left" src="/images/post_images/tunnel.jpg" title="Creative Commons image" >
Using a
<a href="http://en.wikipedia.org/wiki/SOCKS" title="Wikipedia article">Socks proxy</a> over an
<a href="http://en.wikipedia.org/wiki/Tunneling_protocol#Secure_shell_tunneling" title="Wikipedia entry">SSH tunnel</a>
is a well documented and simple if much less flexible stand in for a full-blown
<a href="http://en.wikipedia.org/wiki/Virtual_private_network%20'VPN%20on%20Wikipedia">VPN</a>. It
can provide a degree of comfort when accessing private or sensitive information
over a public Internet connection, or you might use it to get around the
terminally Canutian<sup>1</sup> construct that is known as geo-blocking; that
asinine practice of pretending that the Internet observes political boundaries…</p>

<p>By way of a digression, it occurred to me at some point while I was wrestling
with setting this up that, over the last seven or so years, much of the
“entertainment” provided by corporate content distributors has been in the form
of encouraging me to spend hundreds? thousands? of hours researching and
implementing ways to circumvent their litany of failed and defective
technological restrictions: region codes,
<a href="http://www.defectivebydesign.org/what_is_drm_digital_restrictions_management" title="Defective by Design">DRM</a>
and the like. It is worth noting that, in the vast majority of cases, I was
just seeking access to content that I already owned (in another format), or was
prepared to pay for.</p>

<p>My move to GNU/Linux in 2007 was in large part motivated by the awful
realisation that the music I had bought in iTunes was stuck in there. The
combined intellectual effort globally expended trying to legitimately route
around broken copyright law would have comfortably powered another golden age
of the sciences; it&rsquo;s not entirely implausible to think that the only reason we
still have to deal with cancer is the malignant legacy of
<a href="https://en.wikipedia.org/wiki/Sonny_Bono_Copyright_Term_Extension_Act" title="Sonny's gift…">Sonny Bono</a><sup>2</sup>.</p>

<p>Now, back to our regular programming… One of my approaches to get around this
sort of economic and policy rigor mortis has been to use a basic script to
create a proxy tunnel to my home server. It assumes that you have
<a href="http://en.wikipedia.org/wiki/Public-key_cryptography" title="Wikipedia, again">public key</a>
authentication set up and your passphrase loaded in
<a href="https://wiki.archlinux.org/index.php/SSH_Keys#Keychain" title="Arch wiki, for a change">keychain</a>,
or something similar.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c">#!/usr/bin/env bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">SSH_HOST</span><span class="o">=</span><span class="s2">&quot;jason@XXX.XXX.XXX.XXX -p XXX -i $HOME/.ssh/box1&quot;</span>
</span><span class='line'>
</span><span class='line'>up<span class="o">(){</span>
</span><span class='line'>    ssh -f -N -D 8080 -M -S /tmp/ssh_tunnel_%h.sock -o <span class="nv">ExitOnForwardFailure</span><span class="o">=</span>yes <span class="nv">$SSH_HOST</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
</span><span class='line'>    <span class="nb">printf</span> <span class="s1">&#39;%s\n&#39;</span> <span class="s2">&quot;ssh tunnel started successfully&quot;</span> <span class="o">||</span> <span class="se">\</span>
</span><span class='line'>    <span class="nb">printf</span> <span class="s1">&#39;%s\n&#39;</span> <span class="s2">&quot;ssh tunnel failed to start&quot;</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'>down<span class="o">(){</span>
</span><span class='line'>    ssh -S /tmp/ssh_tunnel_%h.sock -O <span class="nb">exit</span> <span class="nv">$SSH_HOST</span>
</span><span class='line'><span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">=</span> up <span class="o">]]</span>; <span class="k">then</span>
</span><span class='line'><span class="k">    </span>up <span class="o">&amp;&amp;</span> chromium --proxy-server<span class="o">=</span><span class="s2">&quot;socks://127.0.0.1:8080&quot;</span> &amp;
</span><span class='line'><span class="k">elif</span> <span class="o">[[</span> <span class="nv">$1</span> <span class="o">=</span> down <span class="o">]]</span>; <span class="k">then</span>
</span><span class='line'><span class="k">    </span>down
</span><span class='line'><span class="k">else</span>
</span><span class='line'><span class="k">    </span><span class="nb">printf</span> <span class="s1">&#39;%s\n&#39;</span> <span class="s2">&quot;Fail…&quot;</span>
</span><span class='line'>    <span class="nb">exit </span>1
</span><span class='line'><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure>


<p>Over the last couple of weeks, though, while I have been setting up and
<a href="http://jasonwryan.com/blog/2014/05/10/syncthing/" title="Post on Syncthing">playing with Syncthing</a>,
I found this script wanting. With six nodes and, depending if I was on the
<acronym title="Local Area Network">LAN</acronym> or not, as many as four of those
hosts only accessible via SSH, then having the ability to quickly and painlessly
open a browser on any one of the nodes <em>without having to edit the script</em>
suddenly seemed like quite a good idea.</p>

<p>Accordingly I went to work on the script, including a test to determine if I
was on my home network and passing the name of the desired host as an
argument. With this approach, I simply type <code>tunnel $host</code> and chromium
opens tunneled to that host, where I can the happily open
<strike>Hulu</strike> the Syncthing GUI.</p>

<p>The updated script is posted as
<a href="https://gist.github.com/jasonwryan/715a4f3fcb55e995de0d" title="On Github">a gist</a>,
and as you can see, still needs some work to make it a little more generic.
You will need, for example, to hand edit in the hosts and ports in
<code>get_host()</code>. It is also the first time I have played with
<a href="http://mywiki.wooledge.org/BashGuide/InputAndOutput#Pipes" title="Wooledge wiki">named pipes</a>
and I am not convinced that my use of <code>mkfifo</code> here is either the correct
approach or implementation; but it works. Comments enlightening me would
be gratefully received.</p>

<h4>Notes</h4>

<ol>
<li>The good king was, appropriately enough, actually called Cnut the Great…</li>
<li>And, no, I am not referring to his musical corpus, which is as carcinogenic as his
political career was as a Myrmidon for Big Content.</li>
</ol>


<p>Flickr Creative Commons image, <a href="https://www.flickr.com/photos/lawrence_evil/113733779/">The Tunnel</a>,
by Lawrence Whitmore.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/05/10/syncthing/">Using Syncthing</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2014-05-10T09:30:00+12:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2014</span></span> <span class='time'>9:30 am</span></time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img class="left" src="/images/post_images/syncthing.png" title="Syncthing logo" >
Just over a year ago, I was invited to participate in an exciting Alpha, for
<a href="http://www.bittorrent.com/sync" title="Sync website), an application
that allows you to sync selected directories across devices using a
[peer-to-peer protocol](https://en.wikipedia.org/wiki/Bittorent 'Wikipedia article">BitTorrent Sync</a>.
I <a href="http://jasonwryan.com/blog/2013/03/16/sync/" title="Click the damn thing…">wrote up my experience</a>
and, with one reservation, found it to be a fantastic tool that did pretty much everything I
needed, including letting me finally get rid of Dropbox. That one reservation, although not
entirely clear at the time, was clarified soon after and was crushingly disappointing:
the programme was closed source.</p>

<p>Due to a combination of inertia (it was installed on all my devices and working well) and
the lack of an alternative that didn&rsquo;t involve installing and running a
<a href="https://en.wikipedia.org/wiki/Lamp_stack" title="Wikipedia page">LAMP stack</a> just to sync
my files, I have persisted with it; even writing a
<a href="http://jasonwryan.com/blog/2013/11/14/api/" title="Post on said script">simple Awk script</a>
to interact with the <acronym title="Application Program Interface">API</acronym>.
For the last twelve months I have been pretty happy with it.</p>

<p>In addition to the licensing choice, there are some other small issues that I have discovered: the
<a href="https://play.google.com/store/apps/details?id=com.bittorrent.sync" title="On Google Play">Android App</a>
<em>chews</em> through your battery if it is left on (which sort of defeats the purpose, but I
learned to live with it), the syncing can take a little while to pick up changes, and
nodes that don&rsquo;t see much action may flake out completely after a while.</p>

<p>Then, a few weeks ago I read about <a href="https://github.com/jewel/clearskies" title="On Github">clearskies</a>,
an open source implementation of this concept. Sadly, it is still a proof of
concept. This discovery, however, led to an extremely fortuitous exchange
<a href="https://twitter.com/csantosb/status/460714748322258944" title="Twitter conversation">on Twitter</a>
with <a href="https://twitter.com/csantosb" title="His profile on Twitter">cayetano santos</a> who pointed me
at <a href="http://syncthing.net/" title="Syncthing homepage">Syncthing</a>. Described thus (cue
<a href="http://www.youtube.com/watch?v=7YaGwI7GjlA" title="G.F. Handel on Youtube">background music</a>):</p>

<blockquote><p>Syncthing replaces Dropbox and BitTorrent Sync with something open, trustworthy and decentralized. Your data is your data alone and you deserve to choose where it is stored, if it is shared with some third party and how it's transmitted over the Internet.</p></blockquote>


<p>Written in <a href="http://golang.org/" title="Go language site">Go</a>, Syncthing is still in
early development, but judging by the
<a href="https://github.com/calmh/syncthing/releases" title="Releases on Github">release history</a>,
it is moving ahead quickly. The developer, <a href="https://nym.se/" title="Jakob's site">Jakob Borg</a>,
is obviously both talented and productive. After using it for the last
couple of weeks, I have uninstalled BitTorrent Sync from all my machines
and have Syncthing set up and running nicely. It is simple, elegant and
works wonderfully; <em>for what it does</em>.</p>

<p>Which is to say that it is not all of the things that either of its
predecessors are: it isn&rsquo;t intended to distribute files, or to host images or
simple websites. It doesn&rsquo;t include versioning or have a built-in editor. It is
for securely syncing your files independent of any third parties. And there is no
Android app, so your battery is safe<sup>1</sup>.</p>

<p>Setup is through a tidy, <a href="http://getbootstrap.com/" title="Bootstrap site">bootstrap</a>
built web interface, by default running on <code>127.0.0.1:8080</code>. I subsequently found
that once I understood how the configuration worked, editing the config file at
<span class="file">$XDG_CONFIG_HOME/syncthing/config.xml</span> was much
simpler.  When setting up, you will also do a lot of stopping and starting of
<code>syncthing</code>; if you use the service file that comes with the
<a href="https://aur.archlinux.org/packages/syncthing/" title="Arch User Repo">AUR package</a>,
that won&rsquo;t work so well from the web interface… Run it from the command line
with one of the <code>STTRACE</code> variables to debug and then, once it is running to
your liking, hand it off to systemd<sup>2</sup>.</p>

<p>With a reasonably tricky cluster setup (six machines; two outside the
<acronym title="Local Area Network">LAN</acronym> sharing half a dozen
repositories with three different topologies), there is a fair bit of trial and
error involved getting everything set up and working correctly. But when you
do, it is much faster to pick up changes than either of the other two and there
is none of the risk around privacy and security presented by Dropbox and—to a
(much, I would hazard to guess) lesser extent—BitTorrent Sync.</p>

<p>I have also found that it is much quicker for all of the nodes connect if,
for the LAN connections in your cluster, you specify the
<acronym title="Internet Protocol">IP</acronym> addresses and port and disable
global discovery for those nodes: this speeds up the discovery time when
the nodes are started. Nodes still, from time-to-time, flake out, particularly
if one of them is rebooted. Restarting the offending node is usually sufficient
to bring the cluster back into sync.</p>

<p>That isn&rsquo;t to say that there aren&rsquo;t any issues with it. The documentation is in
need of some work; your best bet at the moment is a combination of the rather
terse <code>--help</code> message and reading the source. There are also some hidden gems
in the Github commits; for example, details on using
<span class="file">.stignore</span> files, a very handy feature, are buried in
an earlier
<a href="https://github.com/calmh/syncthing/commit/986b15573a66f95beae53b10371ba50ab147124a" title="Github commit">commit to README.md</a> that didn&rsquo;t survive the move of the documentation to the
forum.</p>

<p>The only other significant issue I have encountered is that getting all of the
nodes across the cluster to connect to each other at the same time seems to be
inexplicably difficult. It may just be my setup, but more often than not, nodes
(on the LAN) will timeout while trying to connect to at least one of their peers.
This isn&rsquo;t a huge issue as you only really need one chained connection to bring
all the data up to date, but it does cause a something of a minor
<acronym title="Obsessive Compulsive Disorder">OCD</acronym> flare up.</p>

<p>Given the early stages of the project, though, and the fact that it is open
source, these anomalies are trivial. Overall, Syncthing is a delight. It does
exactly what I need it to do, and it does it securely. Given the promise it is
showing this early, I can only imagine it getting a lot better over time as
more
<a href="https://github.com/calmh/syncthing/issues?state=open" title="Issues on Github">bugs are squashed</a>
and features rolled out.</p>

<h4>Notes</h4>

<ol>
<li>Naturally enough, someone is <a href="https://github.com/calmh/syncthing/issues/177">on the case</a>…
<strong>Update: 17/5/14</strong> App is available on
<a href="https://play.google.com/store/apps/details?id=com.nutomic.syncthingandroid">Google Play</a> and it works pretty well.</li>
<li>I added a debian daemon script to a thread on
<a href="http://discourse.syncthing.net/t/keeping-syncthing-running/30/2">the Syncthing boards</a>
as there is no built in daemon functionality (yet).</li>
</ol>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/5">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/3">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/01/19/overlayfs/">Playing with overlayfs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/25/snapclean/">Pruning Tarsnap Archives</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/20/multiarch/">Multi-arch Packages in AUR</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/09/06/reminder/">Simple Reminders</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/08/23/asp/">Building from Source</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll...</ul>
  <p><a href="http://pinboard.in/u:jasonwryan">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "jasonwryan"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="librefm">
<h1>Listening to</h1>
<style type="text/css">
  #librefmList li{ text-align: left; }
</style>
<ul id="librefmList">
  <li class="loading">Updating tracks...</li>
</ul>
<p><a href="http://alpha.libre.fm/user/jasonwryan">My tunes on Libre.fm &raquo;</a></p>

<script lang="Javascript">
    /*
     * JavaScript Pretty Date
     * Copyright (c) 2011 John Resig (ejohn.org)
     * Licensed under the MIT and GPL licenses.
     */

    // Takes an ISO time and returns a string representing how
    // long ago the date represents.
    function prettyDate(time){
        diff = ((new Date()).getTime()/1000 - time),
        day_diff = Math.floor(diff / 86400);

      if ( isNaN(day_diff) || day_diff < 0 || day_diff >= 31 )
        return;

      return day_diff == 0 && (
          diff < 60 && "just now" ||
          diff < 120 && "1 minute" ||
          diff < 3600 && Math.floor( diff / 60 ) + " minutes" ||
          diff < 7200 && "1 hour" ||
          diff < 86400 && Math.floor( diff / 3600 ) + " hours") ||
        day_diff == 1 && "Yesterday" ||
        day_diff < 7 && day_diff + " days" ||
        day_diff < 31 && Math.ceil( day_diff / 7 ) + " weeks";
    }
</script>
<script lang="Javascript">
    function showLibrefmFeed(json){
        if(json.recenttracks == 'undefined'){
            return
        }

        var tracklist = document.getElementById('librefmList'),
            content = '';

        $.each(json.recenttracks.track, function(i, track){
            var interval = prettyDate(track.date['uts']);
            content += '<li id="librefmItem_'+i+'"><a href="'+ track.url + '">' + track.name +'</a> by '+ track.artist['#text'] + '<span class="date"> ' + interval  + ( interval == 'just now' ? '' :' ago') + '</span></li>';
        });

        tracklist.innerHTML = content;
    }
</script>
<script lang="Javascript" src="https://libre.fm/2.0/?method=user.getrecenttracks&user=jasonwryan&page=1&limit=5&format=json&callback=showLibrefmFeed""></script>

</section>

<section>
<p class="arch"><a href="http://unix.stackexchange.com/users/6761/jasonwryan">
<img src="http://unix.stackexchange.com/users/flair/6761.png" border="0" width="208" height="58" alt="profile for jasonwryan at Unix and Linux, Q&amp;A for users of Linux, FreeBSD and other Un*x-like operating systems." title="profile for jasonwryan at Unix and Linux, Q&amp;A for users of Linux, FreeBSD and other Un*x-like operating systems.">
</a></p>
</section>
<section>
<p class="arch"><a href="https://archlinux.org/" title="Arch Linux"><img src="/images/running-on-arch.png" /></a></p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
All content licensed under <a href="http://creativecommons.org/licenses/by/2.5/" title="Creative Commons by Attribution">Creative Commons</a> 2009-2017 - Jason Ryan    
<span class="credit">This site is powered by <a href="http://vim.org">Vim</a>, <a href="http://octopress.org">Octopress</a> and <a href="http://github.com">Github</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jasonwryan';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
