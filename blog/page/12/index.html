
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>jasonwryan.com</title>
  <meta name="author" content="Jason Ryan">

  
  <meta name="description" content="I use mutt and
offlineimap
to manage email on my Arch Linux machines. I like the simplicity and the
power that this approach offers; that’s power in &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jasonwryan.github.com/blog/page/12">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="jasonwryan.com" type="application/atom+xml">
  <!-- OpenId login -->
<link rel="openid.server" href="http://openid.claimid.com/server" />
<link rel="openid.delegate" href="http://openid.claimid.com/jasonwryan" />

<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-907012-2']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">jasonwryan.com</a></h1>
  
    <h2>Miscellaneous ephemera…</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://www.duckduckgo.com/" method="get">
  <fieldset role="search">
    <!-- <input type="hidden" name="q" value="site:jasonwryan.github.com" /> -->
    <input type="hidden" name="sites" value="jasonwryan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search duckduckgo&hellip;"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/contact.html">Contact</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2011/01/08/mail-checking-script/">Mail Checking Script</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2011-01-08T11:04:00+13:00" pubdate data-updated="true">Jan 8<span>th</span>, 2011</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://dl.dropbox.com/u/261312/Blog-images/mailcheck.png" alt="image" /></p>

<p>I use <a href="http://www.mutt.org/" title="Mutt homepage">mutt</a> and
<a href="https://github.com/jgoerzen/offlineimap/wiki" title="Offlineimap on github">offlineimap</a>
to manage email on my Arch Linux machines. I like the simplicity and the
power that this approach offers; that’s power in the sense of
extensibility and customization, by the way…</p>

<p>Using <a href="http://dwm.suckless.org/" title="dwm homepage">dwm</a> as my window
manager, I had relied on
<a href="http://jasonwryan.com/blog/2009/11/21/dzen2-and-conky-cli-in-dwm/" title="My post on setting this up">conky and dzen2</a>
to pipe system information into my status bar. Unfortunately, conky only
supports one mail spool so if, like me, you use offlineimap to
synchronize multiple mailboxes, conky would only show new mail in your
primary box. I had asked in #conky about multiple mail spools, but it
doesn’t seem to be supported.</p>

<p>When I recently started using
<a href="http://jasonwryan.com/blog/2010/12/26/wmfs-window-manager-from-scratch/" title="My post on Window Manager From Scratch">WMFS</a>
I decided to move to a
<a href="https://bitbucket.org/jasonwryan/eeepc/src/241da582a0fd/Scripts/wmfs-status" title="Script in mercurial repo">bash script for my status information</a>.
So I approached the problem afresh and decided to write a script to poll
the new mail directories and update my status bar when mail arrived.</p>

<p>Offlineimap creates a directory structure like so:</p>

<pre><code>   Mail/ -------
      |         |
      |     Mail_Account_1
      |         |
      |         | --  INBOX 
      |         |       | -- cur
      |         |       | -- new
      |         |       | -- temp
      |         |
      |         | -- INBOX.Drafts
      |         |       | -- cur
</code></pre>

<p>As I was only interested in checking the <span class="file">INBOX/new</span>
directory of each account, I had imagined that it would be necessary to set up some
elaborate array to effectively check each of the requisite sub-directories…</p>

<p>No, it was pretty simple. Just
<a href="http://www.faqs.org/docs/abs/HTML/globbingref.html" title="ABS entry on globing">globbing</a>
and
<a href="http://linuxmanpages.com/man1/find.1.php" title="man page for find">find</a>,
actually.</p>

<figure class='code'><figcaption><span>mailcheck.sh </span></figcaption>
 <div class="highlight"><pre><code class='sh'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'><span class="c"># Set maildirs</span>
</span><span class='line'><span class="nv">maildirs</span><span class="o">=</span><span class="s2">&quot;$HOME/Mail/*/INBOX/new/&quot;</span>
</span><span class='line'>
</span><span class='line'>find <span class="nv">$maildirs</span> -type f | wc -l
</span><span class='line'><span class="nb">exit </span>0
</span></code></pre></div></figure>


<p>The glob (<code>*</code>) takes care of the different mail account names, and has
the added bonus of being portable, and find returns any files (<code>-type f</code>)
with <code>wc</code> counting the number of lines (the <code>-l</code> switch).</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/12/26/wmfs-window-manager-from-scratch/">WMFS - Window Manager From Scratch</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-12-26T11:08:00+13:00" pubdate data-updated="true">Dec 26<span>th</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="http://www.flickr.com/photos/jasonwryan/5289976238/lightbox/" title="Screenshot on Flickr"><img src="http://dl.dropbox.com/u/261312/Blog-images/wmfs.png" alt="image" /></a></p>

<p>I have been experimenting with a couple of new window managers over the
last week or so. Not that I am in any way dissatisfied with
<a href="http://dwm.suckless.org/" title="suckless page for dwm">dwm</a> — far from it; I
do from time to time, however, like to see what else is on offer.</p>

<p><a href="http://wmfs.info/projects/wmfs" title="WMFS homepage">WMFS</a> is a fairly new
entrant in the window manager marketplace. The developers describe it
as:</p>

<blockquote><p>a lightweight and highly configurable tiling window manager for X… It
supports Xft (Freetype) fonts and is compliant with the Extended
Window Manager Hints (EWMH) specifications, Xinerama and Xrandr.</p></blockquote>

<p>The <a href="http://aur.archlinux.org/packages.php?ID=26924" title="AUR page">git version is available</a> in
AUR, and is straightforward to build and install. The fun, as always,
comes with customization…</p>

<p>As is says on the box, WMFS is highly configurable. The configuration is
all done (initially) in one file, which you will need to copy to your
<span class="file">~/.config/wmfs/directory</span>:</p>

<figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>cp /etc/xdg/wmfs/wmfsrc ~/.config/wmfs/
</span></code></pre></div></figure>


<p>Even the default config is relatively fully featured. There are nine
default layouts (about five more than I usually need, but it is always
better to over cater). The <span class="file">wmfsrc</span> is quite well
commented, so most of the options are self explanatory.</p>

<p>One thing I did note about editing this file, which is probably more a
reflection of my haste rather than the wm itself, is that it seemed
<em>very</em> unforgiving of any errors. More than once I had to copy the
default wmfsrc back across and start again. My advice is to make any
changes cumulatively, and test by reloading before continuing.</p>

<p>You can see my config file in my
<a href="https://bitbucket.org/jasonwryan/eeepc/src/36ae3d14507b/.config/wmfs/wmfsrc" title="Mercurial repository for EeePC">bitbucket repo</a>.
Most of the changes have been made in setting up my preferred tags and
keybindings – so they are consistent with my dwm and
<a href="http://plhk.ru/" title="Echinus window manager home">echinus</a> setups.</p>

<p>One of the great features of WMFS is the status bar. You can pipe all
sorts of information into it with a bash script, and you can use colours
and icons (if that is your thing). Simply sourcing the bash script from
within wmfsrc will see it up and running:</p>

<figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'><span class="nv">background_command</span> <span class="o">=</span> <span class="s2">&quot;$HOME/.config/wmfs/autostart.sh&quot;</span>
</span></code></pre></div></figure>


<p>Or, if you prefer to use conky:</p>

<figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>conky | <span class="k">while </span><span class="nb">read</span> -r; <span class="k">do </span>wmfs -s -name <span class="s2">&quot;$REPLY&quot;</span>; <span class="k">done</span>
</span></code></pre></div></figure>


<p>I use the status bar to display some basic system information. You can
see from
<a href="https://bitbucket.org/jasonwryan/eeepc/src/36ae3d14507b/Scripts/wmfs-status" title="Script in bitbucket repo">my status script</a>
that most of it is simply piping commands through the awesomeness that
is <a href="http://awk.info/" title="Awk Community Portal">awk</a>.</p>

<p>I hadn’t thought that I would find a replacement for dwm, but WMFS is a
serious contender. It has all of the functionality out-of-the-box,
including:</p>

<ul>
<li>pre-set layout per tag</li>
<li>rules to send applications to specific tags</li>
<li>completely customizable keybinds, and – as a bonus,</li>
<li><a href="http://en.wikipedia.org/wiki/Vi" title="Wikipedia page">Vi</a>-driven
command interface</li>
</ul>


<p>Unlike dwm, it requires no patching for any of this. It has been
completely stable while I have been using it and, while not as light as
dwm, it is still in the minimalist camp in terms of size.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2010/10/21/console-fonts-in-ubuntu/">Console Fonts in Ubuntu</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2010-10-21T20:38:00+13:00" pubdate data-updated="true">Oct 21<span>st</span>, 2010</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="http://dl.dropbox.com/u/261312/Blog-images/ubuntu-fonts.png" alt="image" /></p>

<p>Invariably, an <a href="http://www.ubuntu.com/" title="Ubuntu homepage">Ubuntu</a>
upgrade only ever brings me pain in one area: the framebuffer. Granted,
most Ubuntu users probably don’t care about the resolution of their
framebuffer because they probably rarely venture there.</p>

<p>For me, however, having the correct resolution and a decent font is
important. Not because I spend a huge amount of time there (I don’t),
but because in the past I have been forced to — and quickly learned that
if the resolution is off, it makes it <em>very</em> difficult to work with.</p>

<p>So the recent, otherwise completely successful, upgrade to Maverick
Meerkat once again left me with an almost useless console. Fortunately,
the hack for forcing a 1680x1050 resolution worked<sup>1</sup>, so it was just a
matter of getting
<a href="http://fractal.csie.org/~eric/wiki/Terminus_font" title="Terminus homepage">Terminus</a>
to stick as the default console font.</p>

<p>This was one instance where Google failed me. There doesn’t seem to be
any authoritative guide to setting your console font permanently. I
edited <span class="file">/etc/default/console-setup</span>
and added Terminus as the font, like so:</p>

<figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'><span class="nv">CODESET</span><span class="o">=</span><span class="s2">&quot;Lat15&quot;</span>
</span><span class='line'><span class="nv">FONTFACE</span><span class="o">=</span><span class="s2">&quot;Terminus&quot;</span>
</span><span class='line'><span class="nv">FONTSIZE</span><span class="o">=</span><span class="s2">&quot;16&quot;</span>
</span></code></pre></div></figure>


<p>Issuing, from the console:</p>

<figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>sudo setupcon -v
</span></code></pre></div></figure>


<p>would change the font to Terminus for that session but a reboot soon
reverted it to the default fixed (which, given
<a href="https://wiki.ubuntu.com/Ubuntu%20Font%20Family">Ubuntu have been working on their fonts</a>, is
spectacularly ugly).</p>

<p>I finally asked in #ubuntu and was pointed in the right direction:</p>

<figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'>sudo dpkg-reconfigure console-setup
</span></code></pre></div></figure>


<p>And <em>now</em> I have a workable framebuffer.</p>

<h5>Notes</h5>

<ol>
<li>Hack to force higher framebuffer resolution in <span class="file">/etc/default/grub</span></li>
</ol>


<figure class='code'> <div class="highlight"><pre><code class='sh'><span class='line'><span class="nv">GRUB_GFXPAYLOAD_LINUX</span><span class="o">=</span>1680x1050
</span></code></pre></div></figure>



</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/13/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/11/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/05/23/notmuch/">Using Notmuch with mutt</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/12/mutt/">mutt and HTML email</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/21/lbdb/">Using mutt, LDAP and SSL</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/04/05/catalyst/">The Next Thing</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/30/octopress/">Moving to Octopress</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("jasonwryan", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <p><a href="http://twitter.com/jasonwryan">@jasonwryan</a> on Twitter…</p>
  
</section>


<section>
  <h1>My Pinboard</h1>
  <ul id="pinboard_linkroll">Fetching linkroll&#8230;</ul>
  <p><a href="http://pinboard.in/u:jasonwryan">My Pinboard Bookmarks &raquo;</a></p>
</section>
<script type="text/javascript">
  var linkroll = 'pinboard_linkroll'; //id target for pinboard list
  var pinboard_user = "jasonwryan"; //id target for pinboard list
  var pinboard_count = 3; //id target for pinboard list
  (function(){
    var pinboardInit = document.createElement('script');
    pinboardInit.type = 'text/javascript';
    pinboardInit.async = true;
    pinboardInit.src = '/javascripts/pinboard.js';
    document.getElementsByTagName('head')[0].appendChild(pinboardInit);
  })();
</script>


<section class="lastfm">
<h1>Recently Scrobbled</h1>
<style type="text/css">
  #lastfmList li{ text-align: left; }
</style>
<ul id="lastfmList">
  <li class="loading">Updating tracks&#8230;</li>
</ul>
<p><a href="http://alpha.libre.fm/user/jasonwryan">My tunes on Libre.fm &raquo;</a></p>

<script type="text/javascript">
  $.domReady(function(){
    getLastfmFeed("jasonwryan", 5, "3a19a6604d742024a1331bebb7a68d33");
  });
</script>

<script lang="Javascript">
function getLastfmFeed(user,count,api_key) {
  count = parseInt(count, 10);
  $.ajax({
      url: "http://ws.audioscrobbler.com/2.0/?method=user.getrecenttracks&user=" + user + "&limit=" + count + "&api_key=" + api_key
    , type: 'xml'
    , error: function (err) { $('#lastfmList li.loading').addClass('error').text("Last.fm's busted"); }
    , success: function(data) { showLastfmFeed(data); }
  });
}

function showLastfmFeed(xml){
  var tracklist = document.getElementById('lastfmList'),
      content = '',
      i=0;
  
  $(xml.responseXML).find("recenttracks").children().each(function(){
    var artist = $(this).find('artist').text(),
        name = $(this).find('name').text(),
        date = $(this).find('date').text(),
        url = $(this).find('url').text();
    content += '<li id="lastfmItem_'+i+'"><a href="'+ url + '">' + name +'</a> by '+ artist + '<span class="date"> ' + prettyDate(date) + ' ago</span></li>';
    i+=1;
  });

  tracklist.innerHTML = content;
}
</script>
</section>

<section>
<p class="arch"><a href="https://archlinux.org/" title="Arch Linux"><img src="http://dl.dropbox.com/u/261312/running-on-arch.png" /></a></p>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
All content licensed under <a href="http://creativecommons.org/licenses/by/2.5/" title="Creative Commons by Attribution">Creative Commons</a> 2012 - Jason Ryan    
<span class="credit">This site is powered by <a href="http://vim.org">Vim</a>, <a href="http://octopress.org">Octopress</a> and <a href="http://github.com">Github</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'jasonwryan';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
